<div *ngIf="showLoader" class="uk-margin-large-top">
  <div class="loader-big"></div>
</div>

<div *ngIf="model && vocabularies && subVocabularies" class="uk-section-default uk-section uk-section-small uk-padding-remove-top uk-padding-remove-bottom" style="min-height: 90vh;">
  <div class="uk-container uk-container-expand uk-margin-left uk-margin-right">

    <div *ngIf="errorMessage" id="errorAlert" class="uk-alert-danger" uk-alert>
      <a class="uk-alert-close" uk-close></a>
      <pre class="uk-alert-danger">{{errorMessage}}</pre>
    </div>

    <ng-container *ngIf="(editMode && payloadAnswer) || !editMode">
      <app-survey [payload]="payloadAnswer" [model]="model" [vocabulariesMap]="vocabulariesMap" [subVocabularies]="subVocabulariesMap"
                  [tabsHeader]="" (submit)="submitForm($event, false, false)" [activeUsers]="[]">

        <div *ngIf="model" class="uk-grid form-top-section">
          <h5 class="uk-width-1-1 uk-margin-bottom">{{ model.name }}</h5>
          <p class="uk-margin-bottom" [innerHTML]="model.notice"></p>
        </div>

        <div class="form-action-bar titleAndActionsBar uk-flex uk-flex-right justify-content-end" style="min-height: 40px">
          <div>
            <button class="uk-button uk-button-secondary uk-margin-left" (click)="child.parentSubmit()">
              Submit
            </button>
          </div>
        </div>
      </app-survey>
    </ng-container>
  </div>
</div>

<ng-container *ngIf="isDevMode()">
  <pre>{{this.payloadAnswer|json}}</pre>
</ng-container>

<!--<div class="uk-section-default uk-section uk-section-xsmall uk-padding-remove-bottom" style="min-height: 325px">
  <div class="uk-container uk-container-expand">
    <div class="uk-grid-margin uk-grid uk-grid-stack" uk-grid="">
      <div class="uk-width-1-1@m uk-first-column">

        <div class="titleAndActionsBar">
          <div class="">
            <div class="pageTitle">
              {{disable ? ' ' : editMode ? ' Update' : ' Add New'}} Training Resource {{disable ? 'read-only mode' : ''}}
            </div>
            <div class="providerName uk-margin-small-top">
              <strong>{{serviceName!='' ? serviceName : 'Training Resource Name'}}</strong> {{hasChanges ? '(unsaved changes)' : ''}}
            </div>
          </div>
          <div class="uk-flex uk-flex-middle">
            <ng-container *ngIf="!disable">
              &lt;!&ndash;<button class="uk-button uk-button-primary">Discard</button>&ndash;&gt;
&lt;!&ndash;              <button class="uk-button uk-button-primary uk-margin-left"&ndash;&gt;
&lt;!&ndash;                      (click)="openPreviewModal()">Preview&ndash;&gt;
&lt;!&ndash;              </button>&ndash;&gt;
&lt;!&ndash;              <button *ngIf="!editMode || pendingService"&ndash;&gt;
&lt;!&ndash;                      class="uk-button uk-button-primary uk-margin-left" (click)="this.onSubmit(this.service, true)">Save as draft&ndash;&gt;
&lt;!&ndash;              </button>&ndash;&gt;
              <button *ngIf="loaderPercentage==100" class="uk-button uk-button-secondary uk-margin-left"
                      (click)="showCommentModal()" type="submit">Submit
              </button>
            </ng-container>
          </div>
        </div>


        &lt;!&ndash;<h2 class="uk-text-center uk-h2 uk-scrollspy-inview uk-animation-slide-bottom-small" uk-scrollspy-class=""&ndash;&gt;
        &lt;!&ndash;style="">&ndash;&gt;
        &lt;!&ndash;<img class="el-image uk-border-rounded"&ndash;&gt;
        &lt;!&ndash;src="{{(serviceForm && serviceForm.get('logo').value) ? serviceForm.get('logo').value : '/lib/assets/images/broken_image-black-48dp.svg'}}"&ndash;&gt;
        &lt;!&ndash;width="50">&ndash;&gt;
        &lt;!&ndash;{{editMode ? "Edit" : "Add"}} a {{serviceName}} service&ndash;&gt;
        &lt;!&ndash;</h2>&ndash;&gt;

        &lt;!&ndash; TOP HELP CONTENT &ndash;&gt;
        <app-help-content #topHelperContent [position]="'top'"
                          [ngClass]="topHelperContent.isPresent()?'uk-margin-medium-top uk-margin-medium-bottom':'clear-style'">
        </app-help-content>
        <div class="uk-margin-medium-bottom">
          <div class="uk-grid">
            &lt;!&ndash; LEFT HELP CONTENT &ndash;&gt;
            <app-aside-help-content #leftHelperContent [position]="'left'"
                                    [ngClass]="leftHelperContent.isPresent()?'tm-sidebar uk-width-1-4@m uk-first-column':'clear-style'">
            </app-aside-help-content>
            &lt;!&ndash; MIDDLE &ndash;&gt;
            <div class=" uk-width-expand@m uk-margin-medium-top">
              <div *ngIf="showLoader" class="uk-position-center">
                <div uk-spinner="ratio: 2"></div>
              </div>

              <div [ngClass]="{'blur-filter': showLoader}">

                <div *ngIf="!disable" class="requiredFields">Fields with (*) are mandatory and must be completed in order to submit this form. Leaving
                  optional fields blank will remove the relevant heading from the published resource/provider profile.</div>

                <div id="serviceForm">

                  <div class="uk-margin-bottom uk-flex uk-flex-right">
                    <div>
                      <button class="uk-button uk-button-link" type="button">Do you need help?</button>
                      <div uk-drop="pos: bottom-left">
                        <div class="uk-card uk-card-body uk-card-default">
                          <ng-container>
                            <p class="uk-margin-remove-bottom">For questions related to the information that needs to be
                              filled in and suggestions on the portal, please contact us in <a
                                href="mailto:onboarding@eosc-portal.eu">onboarding@eosc-portal.eu</a></p>
                            &lt;!&ndash;                        <p>For technical issues and questions, please contact us in <a href="mailto:providers@eosc-portal.eu">providers@eosc-portal.eu</a></p>&ndash;&gt;
                          </ng-container>
                          &lt;!&ndash; TOP HELP CONTENT &ndash;&gt;
                          <app-help-content #topHelperContent [position]="'top'"
                                            [ngClass]="topHelperContent.isPresent()?'uk-margin-medium-top uk-margin-medium-bottom':'clear-style'">
                          </app-help-content>
                        </div>
                      </div>
                    </div>

                  </div>

                  <div *ngIf="errorMessage" data-uk-alert="" class="uk-alert uk-alert-danger">
                    <p>{{errorMessage}}</p>
                  </div>
                  <div *ngIf="successMessage" data-uk-alert="" class="uk-alert uk-alert-success">
                    <p>{{successMessage}}</p>
                  </div>

                  <div class="uk-grid">

                    <div class="uk-width-1-4">
                      <div class="tabsTitle uk-margin-bottom">Training Resource Profile Information Blocks</div>
                      <ul class="uk-width-1-1 uk-margin-remove uk-tab uk-tab-left form-tabs" uk-tab="connect: #top-navigation-tabs; animation: uk-animation-fade">
                        <li class="uk-active">
                          <a class="remove-text-decoration uk-flex uk-flex-between" [ngClass]="{'form-error': tabs[0]}" href="#" id="tab1">
                            <span>1. Basic *</span>
                            <span *ngIf="!disable" class="circle-number">
                              <i *ngIf="remainingOnTab0==0" aria-hidden="true" class="fa fa-check"></i>
                              {{remainingOnTab0!=0 ? remainingOnTab0 +'*' : ''}}
                            </span>
                          </a>
                        </li>
                        <li>
                          <a class="remove-text-decoration uk-flex uk-flex-between" [ngClass]="{'form-error': tabs[1]}" href="#" id="tab2">
                            <span>2. Details & Access *</span>
                            <span *ngIf="!disable" class="circle-number">
                              <i *ngIf="remainingOnTab1==0" aria-hidden="true" class="fa fa-check"></i>
                              {{remainingOnTab1!=0 ? remainingOnTab1 +'*' : ''}}
                            </span>
                          </a>
                        </li>
                        <li>
                          <a class="remove-text-decoration uk-flex uk-flex-between" [ngClass]="{'form-error': tabs[2]}" href="#" id="tab3">
                            <span>3. Learning *</span>
                            <span *ngIf="!disable" class="circle-number">
                              <i *ngIf="remainingOnTab2==0" aria-hidden="true" class="fa fa-check"></i>
                              {{remainingOnTab2!=0 ? remainingOnTab2 +'*' : ''}}
                            </span>
                          </a>
                        </li>
                        <li>
                          <a class="remove-text-decoration uk-flex uk-flex-between" [ngClass]="{'form-error': tabs[3]}" href="#" id="tab4">
                            <span>4. Availability *</span>
                            <span *ngIf="!disable" class="circle-number">
                              <i *ngIf="remainingOnTab3==0" aria-hidden="true" class="fa fa-check"></i>
                              {{remainingOnTab3!=0 ? remainingOnTab3 +'*' : ''}}
                            </span>
                          </a>
                        </li>
                        <li>
                          <a class="remove-text-decoration uk-flex uk-flex-between" [ngClass]="{'form-error': tabs[4]}" href="#" id="tab5">
                            <span>5. Classification *</span>
                            <span *ngIf="!disable" class="circle-number">
                              <i *ngIf="remainingOnTab4==0" aria-hidden="true" class="fa fa-check"></i>
                              {{remainingOnTab4!=0 ? remainingOnTab4 +'*' : ''}}
                            </span>
                          </a>
                        </li>
                        <li>
                          <a class="remove-text-decoration uk-flex uk-flex-between" [ngClass]="{'form-error': tabs[5]}" href="#" id="tab6">
                            <span>6. Contact *</span>
                            <span *ngIf="!disable" class="circle-number">
                              <i *ngIf="remainingOnTab5==0" aria-hidden="true" class="fa fa-check"></i>
                              {{remainingOnTab5!=0 ? remainingOnTab5 +'*' : ''}}
                            </span>
                          </a>
                        </li>

                        &lt;!&ndash;<li class="uk-active"><a class="remove-text-decoration" [ngClass]="{'form-error': tabs[0]}" href="#">Basic *</a></li>&ndash;&gt;
                        &lt;!&ndash;<li><a class="remove-text-decoration" [ngClass]="{'form-error': tabs[1]}" href="#">Marketing *</a></li>&ndash;&gt;
                        &lt;!&ndash;<li><a class="remove-text-decoration" [ngClass]="{'form-error': tabs[2]}" href="#">Classification *</a></li>&ndash;&gt;
                        &lt;!&ndash;<li><a class="remove-text-decoration" [ngClass]="{'form-error': tabs[3]}" href="#">Availability *</a></li>&ndash;&gt;
                        &lt;!&ndash;<li><a class="remove-text-decoration" [ngClass]="{'form-error': tabs[4]}" href="#">Location</a></li>&ndash;&gt;
                        &lt;!&ndash;<li><a class="remove-text-decoration" [ngClass]="{'form-error': tabs[5]}" href="#">Contact *</a></li>&ndash;&gt;
                      </ul>

                      <ng-container *ngIf="!disable">
                        <div class="requiredFields uk-text-right">*Required fields</div>
                        <div class="stepsCompleted uk-margin-top uk-text-center">{{completedTabs}} of {{requiredTabs}}</div>
                        <div class="uk-margin-small-top">
                          <progress id="js-progressbar" class="uk-progress uk-margin-remove-bottom" value="{{loaderPercentage}}" max="100"></progress>
                          <div class="percentageNumber" [ngStyle]="{'margin-left.%': (loaderPercentage*0.9).toLocaleString()}">{{loaderPercentage}}%</div>
                        </div>
                      </ng-container>
                    </div>

                    <form [formGroup]="serviceForm" role="form" class="uk-form uk-margin uk-width-3-4">

                      <div *ngIf="!providersPage?.results?.length">
                        <div *ngIf="!errorMessage" class="uk-position-center">
                          <div uk-spinner="ratio: 2"></div>
                        </div>
                      </div>

&lt;!&ndash;                      <pre>&ndash;&gt;
&lt;!&ndash;                        {{this.loaderBitSet.toString(2)}}&ndash;&gt;
&lt;!&ndash;                        {{this.loaderBitSet.cardinality()}}&ndash;&gt;
&lt;!&ndash;                      </pre>&ndash;&gt;

                      <div class="formContainer">
                        <ul id="top-navigation-tabs" class="uk-switcher uk-margin-top uk-margin-bottom">
                          &lt;!&ndash;Basic&ndash;&gt;
                          <li class="uk-active" id="Basic">
                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="title">
                                {{titleDesc.label + (titleDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{titleDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <input id="title" class="uk-input uk-width-9-10" type="text" formControlName="title"
                                       (input)="handleBitSets(0, 0, 'title'); unsavedChangesPrompt()"
                                       [ngClass]="{'uk-form-danger': checkFormValidity('title', this.editMode) }">
                              </div>
                              <i><small>Suggested length is 100 characters</small></i>
                            </div>
                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="resourceOrganisation">
                                {{resourceOrganisationDesc.label + (resourceOrganisationDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div
                                class="uk-form-description uk-margin-top uk-width-9-10">{{resourceOrganisationDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <ng-select *ngIf="providersPage?.results?.length > 0" class="uk-width-9-10 uk-disabled" id="resourceOrganisation"
                                           [ngClass]="{'uk-form-danger': checkFormValidity('resourceOrganisation', this.editMode)}"
                                           [items]="providersPage.results"
                                           (change)="handleBitSets(0, 1, 'resourceOrganisation'); unsavedChangesPrompt()"
                                           bindLabel="name"
                                           bindValue="id"
                                           clearAllText="Clear"
                                           formControlName="resourceOrganisation">
                                </ng-select>
                              </div>
                            </div>
                            <div formArrayName="resourceProviders" class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="serviceProviders">
                                {{resourceProvidersDesc.label + (resourceProvidersDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div
                                class="uk-form-description uk-margin-top uk-width-9-10">{{resourceProvidersDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <div
                                  *ngFor="let provider of getFieldAsFormArray('resourceProviders').controls; let i=index"
                                  class="uk-margin-bottom">
                                  <ng-select *ngIf="providersPage?.results?.length > 0" class="uk-width-9-10" id="serviceProviders"
                                             [items]="providersPage.results"
                                             (change)="checkForDuplicates('resourceProviders'); unsavedChangesPrompt()"
                                             bindLabel="name"
                                             bindValue="id"
                                             clearAllText="Clear"
                                             [formControlName]="i">
                                  </ng-select>
                                  <a *ngIf="getFieldAsFormArray('resourceProviders').length > 1 && !disable"
                                     class="remove-element uk-padding-small"
                                     (click)="remove('resourceProviders', i); unsavedChangesPrompt()">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                                <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-medium-top">
                                  <a class="add-new-element"
                                     (click)="push('resourceProviders', resourceProvidersDesc.mandatory)">
                                    <i class="fa fa-plus" aria-hidden="true"></i> Add {{resourceProvidersDesc.label}}
                                  </a>
                                </div>
                                &lt;!&ndash;<i><small>{{resourceProvidersDesc.desc}}</small></i>&ndash;&gt;
                              </div>
                            </div>

                            <div formArrayName="authors" class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="authors">
                                {{authorsDesc.label + (authorsDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{authorsDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <div *ngFor="let provider of getFieldAsFormArray('authors').controls; let i=index"
                                     class="uk-margin-bottom">
                                  <input id="authors" class="uk-input uk-animation-slide-top-small uk-width-9-10"
                                         type="text" [formControlName]="i"
                                         (input)="handleBitSets(0, 2, 'authors'); unsavedChangesPrompt(); checkForDuplicates('authors')"
                                         [ngClass]="{'uk-form-danger': checkFormArrayValidity('authors', i, this.editMode)}">
                                  <a *ngIf="getFieldAsFormArray('authors').length > 1 && !disable"
                                     class="remove-element uk-padding-small"
                                     (click)="remove('authors', i); unsavedChangesPrompt(); handleBitSets(0, 2, 'authors')">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                                <i><small>Suggested length is 40 characters</small></i>
                                <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-medium-top">
                                  <a class="add-new-element" (click)="push('authors', authorsDesc.mandatory)">
                                    <i class="fa fa-plus" aria-hidden="true"></i> Add {{authorsDesc.label}}
                                  </a>
                                </div>
                              </div>
                            </div>

                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="url">
                                {{urlDesc.label + (urlDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{urlDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">

                                <input id="url" class="uk-input uk-width-9-10" type="text" formControlName="url"
                                       placeholder="use http:// or https://"
                                       (input)="handleBitSets(0, 3, 'url'); unsavedChangesPrompt()"
                                       [ngClass]="{'uk-form-danger': checkFormValidity('url', this.editMode)}">
                                <div *ngIf="this.editMode && this.isPortalAdmin && this.serviceForm.get('url').value" class="uk-icon">
                                  <a href="{{this.serviceForm.get('url').value}}" target="_blank">&nbsp;&nbsp;<i class="fa fa-external-link"></i></a>
                                </div>
                              </div>
                            </div>

                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="urlType">
                                {{urlTypeDesc.label + (urlTypeDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{urlTypeDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <ng-select *ngIf="urlTypeVocabulary" class="uk-width-9-10" id="urlType"
                                           (change)="unsavedChangesPrompt()"
                                           [ngClass]="{'uk-form-danger': checkFormValidity('urlType', this.editMode)}"
                                           [items]="sortVocabulariesByName(urlTypeVocabulary)"
                                           bindLabel="name"
                                           bindValue="id"
                                           clearAllText="Clear"
                                           formControlName="urlType">
                                </ng-select>
                              </div>
                            </div>

                            <div formArrayName="eoscRelatedServices" class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="eoscRelatedServices">
                                {{eoscRelatedServiceDesc.label + (eoscRelatedServiceDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div
                                class="uk-form-description uk-margin-top uk-width-9-10">{{eoscRelatedServiceDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-medium-top">
                                <div
                                  *ngFor="let provider of getFieldAsFormArray('eoscRelatedServices').controls; let i=index"
                                  class="uk-margin-bottom">
                                  <ng-select *ngIf="relatedResources" class="uk-width-9-10" id="eoscRelatedServices"
                                             [items]="relatedResources"
                                             (change)="checkForDuplicates('eoscRelatedServices'); unsavedChangesPrompt()"
                                             bindLabel="name"
                                             bindValue="id"
                                             clearAllText="Clear"
                                             [formControlName]="i">
                                  </ng-select>
                                  <a *ngIf="getFieldAsFormArray('eoscRelatedServices').length > 1 && !disable"
                                     class="remove-element uk-padding-small"
                                     (click)="remove('eoscRelatedServices', i); unsavedChangesPrompt()">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                                <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-top">
                                  <a class="add-new-element" (click)="push('eoscRelatedServices', false)">
                                    <i class="fa fa-plus" aria-hidden="true"></i> Add {{eoscRelatedServiceDesc.label}}
                                  </a>
                                </div>
                                &lt;!&ndash;<i><small>{{eoscRelatedServiceDesc.desc}}</small></i>&ndash;&gt;
                              </div>
                            </div>

                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right">Alternative Identifiers</label>
                              <div class="uk-form-controls uk-margin-top">
                                <div formArrayName="alternativeIdentifiers"
                                     *ngFor="let altIdentifier of alternativeIdentifiersArray.controls; let i = index">
                                  <div [formGroupName]="i"
                                       class="uk-margin-bottom formGroupElement uk-width-9-10 uk-display-inline-block">
                                    <div class="uk-margin-bottom">
                                      <label class="uk-form-label uk-text-right" for="type">
                                        {{ altIdTypeDesc.label + (altIdTypeDesc.mandatory ? ' (*)' : '') }}
                                      </label>
                                      <div class="uk-form-description uk-margin-top uk-width-9-10">{{altIdTypeDesc.desc}}</div>
                                      <div class="uk-form-controls uk-margin-top">
                                        <input id="type" class="uk-input uk-width-9-10" type="text" formControlName="type"
                                               (input)="unsavedChangesPrompt()"
                                               [ngClass]="{'uk-form-danger': checkFormArrayValidity('alternativeIdentifiers', i, this.editMode, 'type')}">
                                      </div>
                                    </div>
                                    <div class="uk-margin-bottom">
                                      <label class="uk-form-label uk-text-right" for="value">
                                        {{ altIdValueDesc.label + (altIdValueDesc.mandatory ? ' (*)' : '') }}
                                      </label>
                                      <div
                                        class="uk-form-description uk-margin-top uk-width-9-10">{{altIdValueDesc.desc}}</div>
                                      <div class="uk-form-controls uk-margin-top">
                                        <input id="value" class="uk-input uk-width-9-10" type="text" formControlName="value"
                                               (input)="unsavedChangesPrompt()">
                                        &lt;!&ndash;                                               [ngClass]="{'uk-form-danger': checkFormArrayValidity('alternativeIdentifiers', i, this.editMode, 'value')}">&ndash;&gt;
                                      </div>
                                    </div>

                                  </div>
                                  <a *ngIf="getFieldAsFormArray('alternativeIdentifiers').length > 1 && !disable"
                                     class="remove-element uk-padding-small uk-display-inline-block"
                                     (click)="removeAlternativeIdentifier(i); unsavedChangesPrompt();">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                              </div>
                              <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-top">
                                <a class="add-new-element" (click)="pushAlternativeIdentifier()">
                                  <i class="fa fa-plus" aria-hidden="true"></i> Add Alternative Identifier
                                </a>
                              </div>
                            </div>

                            <div class="uk-flex uk-flex-right">
                              <button class="uk-button uk-button-secondary" type="button" (click)="switchToTab('tab2')">Next &nbsp;<i class="fa fa-arrow-circle-right fa-lg"></i></button>
                            </div>

                          </li>
                          &lt;!&ndash;Detailed & Access&ndash;&gt;
                          <li>
                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="description">
                                {{descriptionDesc.label + (descriptionDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div
                                class="uk-form-description uk-margin-top uk-width-9-10">{{descriptionDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top uk-width-9-10">
                                &lt;!&ndash;                              <textarea id="description" class="uk-textarea uk-width-9-10" rows="4"&ndash;&gt;
                                &lt;!&ndash;                                        formControlName="description"&ndash;&gt;
                                &lt;!&ndash;                                        (input)="handleBitSets(1, 3, 'description'); unsavedChangesPrompt()"&ndash;&gt;
                                &lt;!&ndash;                                        [ngClass]="{'uk-form-danger': checkFormValidity('description', this.editMode)}"></textarea>&ndash;&gt;
                                <md-editor  id="description"
                                            [ngClass]="{'uk-form-danger': checkFormValidity('description', this.editMode)}"
                                            [height]="'250px'"
                                            [mode]="'editor'"
                                            [options]="{markedjsOpt: { breaks: true }, showPreviewPanel: true, resizable: true, enablePreviewContentClick: true}"
                                            formControlName="description"
                                            required>
                                </md-editor>
                              </div>
                              <i><small>Suggested length is 1000 characters</small></i>
                            </div>
                            <div formArrayName="keywords" class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="keywords">
                                {{keywordsDesc.label + (keywordsDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{keywordsDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <div *ngFor="let provider of getFieldAsFormArray('keywords').controls; let i=index"
                                     class="uk-margin-bottom">
                                  <input id="keywords" class="uk-input uk-animation-slide-top-small uk-width-9-10"
                                         type="text" [formControlName]="i"
                                         (input)="unsavedChangesPrompt(); checkForDuplicates('keywords')"
                                         [ngClass]="{'uk-form-danger': checkFormArrayValidity('keywords', i, this.editMode)}">
                                  <a *ngIf="getFieldAsFormArray('keywords').length > 1 && !disable"
                                     class="remove-element uk-padding-small"
                                     (click)="remove('keywords', i); unsavedChangesPrompt()">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                                <i><small>Suggested length is 100 characters</small></i>
                                <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-medium-top">
                                  <a class="add-new-element" (click)="push('keywords', keywordsDesc.mandatory)">
                                    <i class="fa fa-plus" aria-hidden="true"></i> Add {{keywordsDesc.label}}
                                  </a>
                                </div>
                              </div>
                            </div>
                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="license">
                                {{licenseDesc.label + (licenseDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{licenseDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">

                                <input id="license" class="uk-input uk-width-9-10" type="text" formControlName="license"
                                       (input)="handleBitSets(1, 4, 'license'); unsavedChangesPrompt()"
                                       [ngClass]="{'uk-form-danger': checkFormValidity('license', this.editMode)}">
                                <div *ngIf="this.editMode && this.isPortalAdmin && this.serviceForm.get('license').value" class="uk-icon">
                                  <a href="{{this.serviceForm.get('license').value}}" target="_blank">&nbsp;&nbsp;<i class="fa fa-external-link"></i></a>
                                </div>
                              </div>
                            </div>
                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="accessRights">
                                {{accessRightsDesc.label + (accessRightsDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{accessRightsDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <ng-select *ngIf="accessRightsVocabulary" class="uk-width-9-10" id="accessRights"
                                           (change)="handleBitSets(1, 5, 'accessRights'); unsavedChangesPrompt()"
                                           [ngClass]="{'uk-form-danger': checkFormValidity('accessRights', this.editMode, accessRightsDesc.mandatory)}"
                                           [items]="sortVocabulariesByName(accessRightsVocabulary)"
                                           bindLabel="name"
                                           bindValue="id"
                                           clearAllText="Clear"
                                           formControlName="accessRights">
                                </ng-select>
                              </div>
                            </div>
                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="versionDate">
                                {{versionDateDesc.label + (versionDateDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{versionDateDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <input id="versionDate" maxlength="10" class="uk-input uk-width-9-10" type="date" lang="en"
                                       formControlName="versionDate"
                                       (input)="handleBitSets(1, 6, 'versionDate'); unsavedChangesPrompt()"
                                       [ngClass]="{'uk-form-danger': checkFormValidity('versionDate', this.editMode)}">
                              </div>
                            </div>

                            <div class="uk-flex justify-content-between">
                              <div class="uk-flex-left">
                                <button class="uk-button uk-button-secondary" type="button" (click)="switchToTab('tab1')"><i class="fa fa-arrow-circle-left fa-lg"></i>&nbsp; Previous</button>
                              </div>
                              <div class="uk-flex-right">
                                <button class="uk-button uk-button-secondary" type="button" (click)="switchToTab('tab3')">Next &nbsp;<i class="fa fa-arrow-circle-right fa-lg"></i></button>
                              </div>
                            </div>

                          </li>
                          &lt;!&ndash;Learning&ndash;&gt;
                          <li>

                            <div formArrayName="targetGroups" class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="targetGroups">
                                {{targetGroupDesc.label + (targetGroupDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div
                                class="uk-form-description uk-margin-top uk-width-9-10">{{targetGroupDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <div *ngFor="let provider of getFieldAsFormArray('targetGroups').controls; let i=index"
                                     [ngClass]="{'uk-margin-bottom': getFieldAsFormArray('targetGroups').controls.length-1 !== i}">
                                  <ng-select *ngIf="targetUsersVocabulary" class="uk-width-9-10" id="targetGroups"
                                             [items]="sortVocabulariesByName(targetUsersVocabulary)"
                                             (change)="handleBitSets(2, 7, 'targetGroups');checkForDuplicates('targetGroups');unsavedChangesPrompt()"
                                             bindLabel="name"
                                             bindValue="id"
                                             clearAllText="Clear"
                                             [formControlName]="i">
                                  </ng-select>
                                  <a *ngIf="getFieldAsFormArray('targetGroups').length > 1 && !disable"
                                     class="remove-element uk-padding-small" (click)="remove('targetGroups', i); unsavedChangesPrompt();
                                   handleBitSets(2, 7, 'targetGroups')">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                                <div class="uk-margin-small-top">
                                  <i><small>For suggestions in amending the
                                    "{{targetGroupDesc.label}}" list, please select "Other", fill in your entry and press the "Submit" button below</small></i>
                                </div>
                                <div *ngFor="let provider of getFieldAsFormArray('targetGroups').controls; let i=index">
                                  <div *ngIf="this.serviceForm.get('targetGroups').value[i] === 'target_user-other'" class="uk-flex uk-flex-left">
                                    <form [formGroup]="vocabularyEntryForm" class="uk-search uk-search-default" style="width: 250px;">
                                      <label>
                                        <input class="uk-input uk-margin-small-top" type="search" placeholder="" formControlName="targetGroupsVocabularyEntryValueName">
                                      </label>
                                    </form>
                                    <button class="uk-button uk-button-default" type="submit"
                                            (click)="submitSuggestion(this.vocabularyEntryForm.get('targetGroupsVocabularyEntryValueName').value, 'TARGET USER', null)">
                                      Submit
                                    </button>
                                    <span class="uk-margin-top uk-margin-medium-left"><i>{{ this.vocabularyEntryForm.get('errorMessage').value ? this.vocabularyEntryForm.get('errorMessage').value : this.vocabularyEntryForm.get('successMessage').value}}</i></span>
                                  </div>
                                </div>
                                <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-medium-top">
                                  <a class="add-new-element" (click)="push('targetGroups', targetGroupDesc.mandatory)">
                                    <i class="fa fa-plus" aria-hidden="true"></i> Add {{targetGroupDesc.label}}
                                  </a>
                                </div>
                              </div>
                            </div>
                            <div formArrayName="learningResourceTypes" class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="learningResourceTypes">
                                {{learningResourceTypeDesc.label + (learningResourceTypeDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{learningResourceTypeDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <div *ngFor="let provider of getFieldAsFormArray('learningResourceTypes').controls; let i=index"
                                     [ngClass]="{'uk-margin-bottom': getFieldAsFormArray('learningResourceTypes').controls.length-1 !== i}">
                                  <ng-select *ngIf="learningResourceTypesVocabulary" class="uk-width-9-10" id="learningResourceTypes"
                                             (change)="checkForDuplicates('learningResourceTypes'); unsavedChangesPrompt()"
                                             [items]="sortVocabulariesByName(learningResourceTypesVocabulary)"
                                             bindLabel="name"
                                             bindValue="id"
                                             clearAllText="Clear"
                                             [formControlName]="i">
                                  </ng-select>
                                  <a *ngIf="getFieldAsFormArray('learningResourceTypes').length > 1 && !disable"
                                     class="remove-element uk-padding-small"
                                     (click)="remove('learningResourceTypes', i); unsavedChangesPrompt()">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                                <div class="uk-margin-small-top">
                                  <i><small>For suggestions in amending the
                                    "{{learningResourceTypeDesc.label}}" list, please select "Other", fill in your entry and press the "Submit" button below</small></i>
                                </div>
                                <div *ngFor="let provider of getFieldAsFormArray('learningResourceTypes').controls; let i=index">
                                  <div *ngIf="this.serviceForm.get('learningResourceTypes').value[i] === 'tr_dcmi_type-other'" class="uk-flex uk-flex-left">
                                    <form [formGroup]="vocabularyEntryForm" class="uk-search uk-search-default" style="width: 250px;">
                                      <label>
                                        <input class="uk-input uk-margin-small-top" type="search" placeholder="" formControlName="learningResourceTypesVocabularyEntryValueName">
                                      </label>
                                    </form>
                                    <button class="uk-button uk-button-default" type="submit"
                                            (click)="submitSuggestion(this.vocabularyEntryForm.get('learningResourceTypesVocabularyEntryValueName').value, 'TR DCMI TYPE', null)">
                                      Submit
                                    </button>
                                    <span class="uk-margin-top uk-margin-medium-left"><i>{{ this.vocabularyEntryForm.get('errorMessage').value ? this.vocabularyEntryForm.get('errorMessage').value : this.vocabularyEntryForm.get('successMessage').value}}</i></span>
                                  </div>
                                </div>
                                <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-medium-top">
                                  <a class="add-new-element" (click)="push('learningResourceTypes', learningResourceTypeDesc.mandatory)">
                                    <i class="fa fa-plus" aria-hidden="true"></i> Add {{learningResourceTypeDesc.label}}
                                  </a>
                                </div>
                              </div>
                            </div>
                            <div formArrayName="learningOutcomes" class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="learningOutcomes">
                                {{learningOutcomesDesc.label + (learningOutcomesDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{learningOutcomesDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <div *ngFor="let provider of getFieldAsFormArray('learningOutcomes').controls; let i=index"
                                     class="uk-margin-bottom">
                                  <input id="learningOutcomes" class="uk-input uk-animation-slide-top-small uk-width-9-10"
                                         type="text" [formControlName]="i"
                                         (input)="handleBitSets(2, 8, 'learningOutcomes'); unsavedChangesPrompt(); checkForDuplicates('learningOutcomes')"
                                         [ngClass]="{'uk-form-danger': checkFormArrayValidity('learningOutcomes', i, this.editMode)}">
                                  <a *ngIf="getFieldAsFormArray('learningOutcomes').length > 1 && !disable"
                                     class="remove-element uk-padding-small"
                                     (click)="remove('learningOutcomes', i); unsavedChangesPrompt(); handleBitSets(2, 8, 'learningOutcomes')">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                                <i><small>Suggested length is 1000 characters</small></i>
                                <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-medium-top">
                                  <a class="add-new-element" (click)="push('learningOutcomes', learningOutcomesDesc.mandatory)">
                                    <i class="fa fa-plus" aria-hidden="true"></i> Add {{learningOutcomesDesc.label}}
                                  </a>
                                </div>
                              </div>
                            </div>
                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="expertiseLevel">
                                {{expertiseLevelDesc.label + (expertiseLevelDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{expertiseLevelDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <ng-select *ngIf="expertiseLevelVocabulary" class="uk-width-9-10" id="expertiseLevel"
                                           (change)="handleBitSets(2, 9, 'expertiseLevel'); unsavedChangesPrompt()"
                                           [ngClass]="{'uk-form-danger': checkFormValidity('expertiseLevel', this.editMode, expertiseLevelDesc.mandatory)}"
                                           [items]="sortVocabulariesByName(expertiseLevelVocabulary)"
                                           bindLabel="name"
                                           bindValue="id"
                                           clearAllText="Clear"
                                           formControlName="expertiseLevel">
                                </ng-select>
                              </div>
                            </div>
                            <div formArrayName="contentResourceTypes" class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="contentResourceTypes">
                                {{contentResourceTypeDesc.label + (contentResourceTypeDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{contentResourceTypeDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <div *ngFor="let provider of getFieldAsFormArray('contentResourceTypes').controls; let i=index"
                                     [ngClass]="{'uk-margin-bottom': getFieldAsFormArray('contentResourceTypes').controls.length-1 !== i}">
                                  <ng-select *ngIf="accessTypesVocabulary" class="uk-width-9-10" id="contentResourceTypes"
                                             (change)="checkForDuplicates('contentResourceTypes'); unsavedChangesPrompt()"
                                             [items]="sortVocabulariesByName(contentResourceTypesVocabulary)"
                                             bindLabel="name"
                                             bindValue="id"
                                             clearAllText="Clear"
                                             [formControlName]="i">
                                  </ng-select>
                                  <a *ngIf="getFieldAsFormArray('contentResourceTypes').length > 1 && !disable"
                                     class="remove-element uk-padding-small"
                                     (click)="remove('contentResourceTypes', i); unsavedChangesPrompt()">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                                <div class="uk-margin-small-top">
                                  <i><small>For suggestions in amending the
                                    "{{contentResourceTypeDesc.label}}" list, please select "Other", fill in your entry and press the "Submit" button below</small></i>
                                </div>
                                <div *ngFor="let provider of getFieldAsFormArray('contentResourceTypes').controls; let i=index">
                                  <div *ngIf="this.serviceForm.get('contentResourceTypes').value[i] === 'tr_content_resource_type-other'" class="uk-flex uk-flex-left">
                                    <form [formGroup]="vocabularyEntryForm" class="uk-search uk-search-default" style="width: 250px;">
                                      <label>
                                        <input class="uk-input uk-margin-small-top" type="search" placeholder="" formControlName="contentResourceTypesVocabularyEntryValueName">
                                      </label>
                                    </form>
                                    <button class="uk-button uk-button-default" type="submit"
                                            (click)="submitSuggestion(this.vocabularyEntryForm.get('contentResourceTypesVocabularyEntryValueName').value, 'Training Resource content resource type', null)">
                                      Submit
                                    </button>
                                    <span class="uk-margin-top uk-margin-medium-left"><i>{{ this.vocabularyEntryForm.get('errorMessage').value ? this.vocabularyEntryForm.get('errorMessage').value : this.vocabularyEntryForm.get('successMessage').value}}</i></span>
                                  </div>
                                </div>
                                <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-medium-top">
                                  <a class="add-new-element" (click)="push('contentResourceTypes', contentResourceTypeDesc.mandatory)">
                                    <i class="fa fa-plus" aria-hidden="true"></i> Add {{contentResourceTypeDesc.label}}
                                  </a>
                                </div>
                              </div>
                            </div>
                            <div formArrayName="qualifications" class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="qualifications">
                                {{qualificationDesc.label + (qualificationDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{qualificationDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <div *ngFor="let provider of getFieldAsFormArray('qualifications').controls; let i=index"
                                     [ngClass]="{'uk-margin-bottom': getFieldAsFormArray('qualifications').controls.length-1 !== i}">
                                  <ng-select *ngIf="accessTypesVocabulary" class="uk-width-9-10" id="qualifications"
                                             (change)="checkForDuplicates('qualifications'); unsavedChangesPrompt()"
                                             [items]="sortVocabulariesByName(qualificationsVocabulary)"
                                             bindLabel="name"
                                             bindValue="id"
                                             clearAllText="Clear"
                                             [formControlName]="i">
                                  </ng-select>
                                  <a *ngIf="getFieldAsFormArray('qualifications').length > 1 && !disable"
                                     class="remove-element uk-padding-small"
                                     (click)="remove('qualifications', i); unsavedChangesPrompt()">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                                <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-medium-top">
                                  <a class="add-new-element" (click)="push('qualifications', qualificationDesc.mandatory)">
                                    <i class="fa fa-plus" aria-hidden="true"></i> Add {{qualificationDesc.label}}
                                  </a>
                                </div>
                              </div>
                            </div>
                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="duration">
                                {{durationDesc.label + (durationDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div class="uk-form-description uk-margin-top uk-width-9-10">{{durationDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <input id="duration" class="uk-input uk-width-9-10" type="text" formControlName="duration"
                                       (input)="unsavedChangesPrompt()"
                                       [ngClass]="{'uk-form-danger': checkFormValidity('duration', this.editMode) }">
                              </div>
                              <i><small>Suggested length is 40 characters</small></i>
                            </div>

                            <div class="uk-flex justify-content-between">
                              <div class="uk-flex-left">
                                <button class="uk-button uk-button-secondary" type="button" (click)="switchToTab('tab2')"><i class="fa fa-arrow-circle-left fa-lg"></i>&nbsp; Previous</button>
                              </div>
                              <div class="uk-flex-right">
                                <button class="uk-button uk-button-secondary" type="button" (click)="switchToTab('tab4')">Next &nbsp;<i class="fa fa-arrow-circle-right fa-lg"></i></button>
                              </div>
                            </div>

                          </li>
                          &lt;!&ndash;Availability&ndash;&gt;
                          <li>
                            <div formArrayName="languages" class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="languages">
                                {{ languagesDesc.label + (languagesDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div
                                class="uk-form-description uk-margin-top uk-width-9-10">{{languagesDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <div
                                  *ngFor="let provider of getFieldAsFormArray('languages').controls; let i=index"
                                  [ngClass]="{'uk-margin-bottom': getFieldAsFormArray('languages').controls.length-1 !== i}">
                                  <ng-select *ngIf="languagesVocabulary" class="uk-width-9-10" id="languages"
                                             [items]="languagesVocabulary"
                                             (change)="handleBitSets(3, 10, 'languages');checkForDuplicates('languages');unsavedChangesPrompt()"
                                             bindLabel="name"
                                             bindValue="id"
                                             clearAllText="Clear"
                                             [formControlName]="i">
                                  </ng-select>
                                  <a *ngIf="getFieldAsFormArray('languages').length > 1 && !disable"
                                     class="remove-element uk-padding-small" (click)="remove('languages', i); unsavedChangesPrompt();
                                   handleBitSets(3, 12, 'languages')">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                                <div class="uk-margin-small-top">
                                  <i><small>For suggestions in amending the
                                    "{{languagesDesc.label}}" list, please select "Other", fill in your entry and press the "Submit" button below</small></i>
                                </div>
                                <div *ngFor="let provider of getFieldAsFormArray('languages').controls; let i=index">
                                  <div *ngIf="this.serviceForm.get('languages').value[i] === 'ot'" class="uk-flex uk-flex-left">
                                    <form [formGroup]="vocabularyEntryForm" class="uk-search uk-search-default" style="width: 250px;">
                                      <label>
                                        <input class="uk-input uk-margin-small-top" type="search" placeholder="" formControlName="languagesVocabularyEntryValueName">
                                      </label>
                                    </form>
                                    <button class="uk-button uk-button-default" type="submit"
                                            (click)="submitSuggestion(this.vocabularyEntryForm.get('languagesVocabularyEntryValueName').value, 'LANGUAGE', null)">
                                      Submit
                                    </button>
                                    <span class="uk-margin-top uk-margin-medium-left"><i>{{ this.vocabularyEntryForm.get('errorMessage').value ? this.vocabularyEntryForm.get('errorMessage').value : this.vocabularyEntryForm.get('successMessage').value}}</i></span>
                                  </div>
                                </div>
                                <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-medium-top">
                                  <a class="add-new-element"
                                     (click)="push('languages', languagesDesc.mandatory)">
                                    <i class="fa fa-plus" aria-hidden="true"></i>
                                    Add {{languagesDesc.label}}
                                  </a>
                                </div>
                              </div>
                            </div>
                            <div formArrayName="geographicalAvailabilities" class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right" for="geographicalAvailabilities">
                                {{geographicalAvailabilityDesc.label + (geographicalAvailabilityDesc.mandatory ? ' (*)' : '')}}
                              </label>
                              <div
                                class="uk-form-description uk-margin-top uk-width-9-10">{{geographicalAvailabilityDesc.desc}}</div>
                              <div class="uk-form-controls uk-margin-top">
                                <div
                                  *ngFor="let place of getFieldAsFormArray('geographicalAvailabilities').controls; let i=index"
                                  [ngClass]="{'uk-margin-bottom': getFieldAsFormArray('geographicalAvailabilities').controls.length-1 !== i}">
                                  <ng-select *ngIf="geographicalVocabulary" class="uk-width-9-10" id="geographicalAvailabilities"
                                             [items]="geographicalVocabulary"
                                             (change)="handleBitSets(3, 11, 'geographicalAvailabilities');checkForDuplicates('geographicalAvailabilities');unsavedChangesPrompt()"
                                             bindLabel="name"
                                             bindValue="id"
                                             clearAllText="Clear"
                                             [formControlName]="i">
                                  </ng-select>
                                  <a *ngIf="getFieldAsFormArray('geographicalAvailabilities').length > 1 && !disable"
                                     class="remove-element uk-padding-small" (click)="remove('geographicalAvailabilities', i);
                                     unsavedChangesPrompt();handleBitSets(3, 11, 'geographicalAvailabilities')">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                                <div class="uk-margin-small-top">
                                  <i><small>For suggestions in amending the
                                    "{{geographicalAvailabilityDesc.label}}" list, please select "Other", fill in your entry and press the "Submit" button below</small></i>
                                </div>
                                <div *ngFor="let place of getFieldAsFormArray('geographicalAvailabilities').controls; let i=index">
                                  <div *ngIf="this.serviceForm.get('geographicalAvailabilities').value[i] === 'OT'" class="uk-flex uk-flex-left">
                                    <form [formGroup]="vocabularyEntryForm" class="uk-search uk-search-default" style="width: 250px;">
                                      <label>
                                        <input class="uk-input uk-margin-small-top" type="search" placeholder="" formControlName="geographicalVocabularyEntryValueName">
                                      </label>
                                    </form>
                                    <button class="uk-button uk-button-default" type="submit"
                                            (click)="submitSuggestion(this.vocabularyEntryForm.get('geographicalVocabularyEntryValueName').value, 'COUNTRY', null)">
                                      Submit
                                    </button>
                                    <span class="uk-margin-top uk-margin-medium-left"><i>{{ this.vocabularyEntryForm.get('errorMessage').value ? this.vocabularyEntryForm.get('errorMessage').value : this.vocabularyEntryForm.get('successMessage').value}}</i></span>
                                  </div>
                                </div>
                                <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-medium-top">
                                  <a class="add-new-element"
                                     (click)="push('geographicalAvailabilities', geographicalAvailabilityDesc.mandatory)">
                                    <i class="fa fa-plus" aria-hidden="true"></i>
                                    Add {{geographicalAvailabilityDesc.label}}
                                  </a>
                                </div>
                              </div>
                            </div>

                            <div class="uk-flex justify-content-between">
                              <div class="uk-flex-left">
                                <button class="uk-button uk-button-secondary" type="button" (click)="switchToTab('tab3')"><i class="fa fa-arrow-circle-left fa-lg"></i>&nbsp; Previous</button>
                              </div>
                              <div class="uk-flex-right">
                                <button class="uk-button uk-button-secondary" type="button" (click)="switchToTab('tab5')">Next &nbsp;<i class="fa fa-arrow-circle-right fa-lg"></i></button>
                              </div>
                            </div>

                          </li>
                          &lt;!&ndash;Classification&ndash;&gt;
                          <li>
                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right">
                                Scientific Categorisation (*)
                              </label>
                              <div class="uk-form-controls uk-margin-top">
                                <div formArrayName="scientificDomains"
                                     *ngFor="let category of scientificDomainArray.controls; let i = index">
                                  <div [formGroupName]="i"
                                       class="uk-margin-bottom formGroupElement uk-width-9-10 uk-display-inline-block">
                                    &lt;!&ndash;<a *ngIf="scientificDomainArray.length > 1" class="remove-element uk-padding-small"&ndash;&gt;
                                    &lt;!&ndash;(click)="removeScientificDomain(i); unsavedChangesPrompt()">&ndash;&gt;
                                    &lt;!&ndash;<i class="fa fa-times" aria-hidden="true"></i>&ndash;&gt;
                                    &lt;!&ndash;</a>&ndash;&gt;
                                    <div class="uk-margin-bottom">
                                      <label class="uk-form-label uk-text-right" for="{{'scientificDomain ' + i}}">
                                        {{scientificDomainDesc.label + (scientificDomainDesc.mandatory ? ' (*)' : '')}}
                                      </label>
                                      <div
                                        class="uk-form-description uk-margin-top uk-width-9-10">{{scientificDomainDesc.desc}}</div>
                                      <div class="uk-form-controls uk-margin-top">
                                        <ng-select *ngIf="scientificDomainVocabulary" class="uk-width-1-1" id="{{'scientificDomain ' + i}}"
                                                   (change)="onScientificDomainChange(i); unsavedChangesPrompt()"
                                                   [items]="sortVocabulariesByName(scientificDomainVocabulary)"
                                                   bindLabel="name"
                                                   bindValue="id"
                                                   clearAllText="Clear"
                                                   formControlName="scientificDomain">
                                        </ng-select>
                                        <div class="uk-margin-small-top">
                                          <i><small>For suggestions in amending the
                                            "{{scientificDomainDesc.label}}" list, please select "Other", fill in your entry and press the "Submit" button below</small></i>
                                        </div>
                                        <div *ngIf="this.scientificDomainArray.controls[i].get('scientificDomain').value">
                                          <div *ngIf="this.scientificDomainArray.controls[i].get('scientificDomain').value === 'scientific_domain-other'" class="uk-flex uk-flex-left">
                                            &lt;!&ndash;                                          <form [formGroup]="vocabularyEntryForm" (ngSubmit)="submitSuggestion()" class="uk-search uk-search-default" style="width: 250px;">&ndash;&gt;
                                            <form [formGroup]="vocabularyEntryForm" class="uk-search uk-search-default" style="width: 250px;">
                                              <label>
                                                <input class="uk-input uk-margin-small-top" type="search" placeholder="" formControlName="scientificDomainVocabularyEntryValueName">
                                              </label>
                                            </form>
                                            <button class="uk-button uk-button-default" type="submit"
                                                    (click)="submitSuggestion(this.vocabularyEntryForm.get('scientificDomainVocabularyEntryValueName').value, 'SCIENTIFIC DOMAIN', null)">
                                              Submit
                                            </button>
                                            <span class="uk-margin-top uk-margin-medium-left"><i>{{ this.vocabularyEntryForm.get('errorMessage').value ? this.vocabularyEntryForm.get('errorMessage').value : this.vocabularyEntryForm.get('successMessage').value}}</i></span>
                                          </div>
                                        </div>
                                      </div>
                                    </div>
                                    <div class="uk-margin-bottom">
                                      <label class="uk-form-label uk-text-right" for="{{'scientificSubdomain ' + i}}">
                                        {{scientificSubDomainDesc.label + (scientificSubDomainDesc.mandatory ? ' (*)' : '')}}
                                      </label>
                                      <div
                                        class="uk-form-description uk-margin-top uk-width-9-10">{{scientificSubDomainDesc.desc}}</div>
                                      <div class="uk-form-controls uk-margin-top">
                                        <ng-select *ngIf="scientificSubDomainVocabulary" id="{{'scientificSubdomain ' + i}}"
                                                   class="uk-width-1-1"
                                                   (change)="handleBitSetsOfGroups(4, 13, 'scientificSubdomain', 'scientificDomains');
                                                    checkForDuplicates('scientificSubdomain','scientificDomains'); unsavedChangesPrompt()"
                                                   [items]="subVocabularies[scientificDomainArray.controls[i].get('scientificDomain').value]"
                                                   bindLabel="name"
                                                   bindValue="id"
                                                   clearAllText="Clear"
                                                   formControlName="scientificSubdomain">
                                        </ng-select>
                                        <div class="uk-margin-small-top">
                                          <i><small>For suggestions in amending the
                                            "{{scientificSubDomainDesc.label}}" list, please select "Other", fill in your entry and press the "Submit" button below</small></i>
                                        </div>
                                        <div *ngIf="this.scientificDomainArray.controls[i].get('scientificDomain').value && this.scientificDomainArray.controls[i].get('scientificSubdomain').value">
                                          <div *ngIf="this.scientificDomainArray.controls[i].get('scientificSubdomain').value.includes('-other')" class="uk-flex uk-flex-left">
                                            &lt;!&ndash;                                          <form [formGroup]="vocabularyEntryForm" (ngSubmit)="submitSuggestion()" class="uk-search uk-search-default" style="width: 250px;">&ndash;&gt;
                                            <form [formGroup]="vocabularyEntryForm" class="uk-search uk-search-default" style="width: 250px;">
                                              <label>
                                                <input class="uk-input uk-margin-small-top" type="search" placeholder="" formControlName="scientificSubDomainVocabularyEntryValueName">
                                              </label>
                                            </form>
                                            <button class="uk-button uk-button-default" type="submit"
                                                    (click)="submitSuggestion(this.vocabularyEntryForm.get('scientificSubDomainVocabularyEntryValueName').value, 'SCIENTIFIC SUBDOMAIN', this.scientificDomainArray.controls[i].get('scientificDomain').value)">
                                              Submit
                                            </button>
                                            <span class="uk-margin-top uk-margin-medium-left"><i>{{ this.vocabularyEntryForm.get('errorMessage').value ? this.vocabularyEntryForm.get('errorMessage').value : this.vocabularyEntryForm.get('successMessage').value}}</i></span>
                                          </div>
                                        </div>
                                      </div>
                                    </div>

                                  </div>
                                  <a *ngIf="scientificDomainArray.length > 1 && !disable"
                                     class="remove-element uk-padding-small uk-display-inline-block"
                                     (click)="removeScientificDomain(i); unsavedChangesPrompt(); handleBitSetsOfGroups(2, 7, 'scientificSubdomain', 'scientificDomains')">
                                    <i class="fa fa-times" aria-hidden="true"></i>
                                  </a>
                                </div>
                              </div>

                              <div *ngIf="!disable" class="uk-width-9-10 uk-text-center uk-margin-top">
                                <a class="add-new-element" (click)="pushScientificDomain()">
                                  <i class="fa fa-plus" aria-hidden="true"></i> Add scientific categorization
                                </a>
                              </div>
                            </div>

                            <div class="uk-flex justify-content-between">
                              <div class="uk-flex-left">
                                <button class="uk-button uk-button-secondary" type="button" (click)="switchToTab('tab4')"><i class="fa fa-arrow-circle-left fa-lg"></i>&nbsp; Previous</button>
                              </div>
                              <div class="uk-flex-right">
                                <button class="uk-button uk-button-secondary" type="button" (click)="switchToTab('tab6')">Next &nbsp;<i class="fa fa-arrow-circle-right fa-lg"></i></button>
                              </div>
                            </div>

                          </li>
                          &lt;!&ndash;Contact&ndash;&gt;
                          <li>
                            <div class="uk-margin-large-bottom">
                              <label class="uk-form-label uk-text-right">Contact (*)</label>
                              <div class="uk-form-controls uk-margin-top">
                                <div formGroupName="contact"
                                     class="uk-margin-bottom formGroupElement uk-width-9-10 uk-display-inline-block">
                                  <div class="uk-margin-bottom">
                                    <label class="uk-form-label uk-text-right" for="contactFirstName">
                                      {{ firstNameDesc.label + (firstNameDesc.mandatory ? ' (*)' : '') }}
                                    </label>
                                    <div
                                      class="uk-form-description uk-margin-top uk-width-9-10">{{firstNameDesc.desc}}</div>
                                    <div class="uk-form-controls uk-margin-top">
                                      <input id="contactFirstName" class="uk-input" type="text"
                                             formControlName="firstName"
                                             (input)="handleBitSetsOfGroups(5, 14, 'firstName', 'contact'); unsavedChangesPrompt()"
                                             [ngClass]="{'uk-form-danger': checkFormValidity('contact.firstName', this.editMode)}">
                                    </div>
                                    <i><small>Suggested length is 20 characters</small></i>
                                  </div>
                                  <div class="uk-margin-bottom">
                                    <label class="uk-form-label uk-text-right" for="contactLastName">
                                      {{ lastNameDesc.label + (lastNameDesc.mandatory ? ' (*)' : '') }}
                                    </label>
                                    <div
                                      class="uk-form-description uk-margin-top uk-width-9-10">{{lastNameDesc.desc}}</div>
                                    <div class="uk-form-controls uk-margin-top">
                                      <input id="contactLastName" class="uk-input" type="text"
                                             formControlName="lastName"
                                             (input)="handleBitSetsOfGroups(5, 15, 'lastName', 'contact'); unsavedChangesPrompt()"
                                             [ngClass]="{'uk-form-danger': checkFormValidity('contact.lastName', this.editMode)}">
                                    </div>
                                    <i><small>Suggested length is 20 characters</small></i>
                                  </div>
                                  <div class="uk-margin-bottom">
                                    <label class="uk-form-label uk-text-right" for="contactEmail">
                                      {{ emailDesc.label + (emailDesc.mandatory ? ' (*)' : '') }}
                                    </label>
                                    <div
                                      class="uk-form-description uk-margin-top uk-width-9-10">{{emailDesc.desc}}</div>
                                    <div class="uk-form-controls uk-margin-top">
                                      <input id="contactEmail" class="uk-input" type="text" formControlName="email"
                                             (input)="handleBitSetsOfGroups(5, 16, 'email', 'contact'); unsavedChangesPrompt()"
                                             [ngClass]="{'uk-form-danger': checkFormValidity('contact.email', this.editMode)}">
                                      &lt;!&ndash;<i><small>{{ contactEmailDesc.desc }}</small></i>&ndash;&gt;
                                    </div>
                                  </div>
                                  <div class="uk-margin-bottom">
                                    <label class="uk-form-label uk-text-right" for="contactPhone">
                                      {{ phoneDesc.label + (phoneDesc.mandatory ? ' (*)' : '') }}
                                    </label>
                                    <div
                                      class="uk-form-description uk-margin-top uk-width-9-10">{{phoneDesc.desc}}</div>
                                    <div class="uk-form-controls uk-margin-top">
                                      <input id="contactPhone" class="uk-input" type="text" formControlName="phone"

                                             [ngClass]="{'uk-form-danger': checkFormValidity('contact.phone', this.editMode)}">
                                    </div>
                                    <i><small>Suggested length is 20 characters</small></i>
                                  </div>
                                  <div class="uk-margin-bottom">
                                    <label class="uk-form-label uk-text-right" for="contactPosition">
                                      {{ positionDesc.label + (positionDesc.mandatory ? ' (*)' : '') }}
                                    </label>
                                    <div
                                      class="uk-form-description uk-margin-top uk-width-9-10">{{positionDesc.desc}}</div>
                                    <div class="uk-form-controls uk-margin-top">
                                      <input id="contactPosition" class="uk-input" type="text"
                                             formControlName="position"

                                             [ngClass]="{'uk-form-danger': checkFormValidity('contact.position', this.editMode)}">
                                    </div>
                                    <i><small>Suggested length is 20 characters</small></i>
                                  </div>
                                  <div class="uk-margin-bottom">
                                    <label class="uk-form-label uk-text-right" for="contactOrganisation">
                                      {{ organisationDesc.label + (organisationDesc.mandatory ? ' (*)' : '') }}
                                    </label>
                                    <div
                                      class="uk-form-description uk-margin-top uk-width-9-10">{{organisationDesc.desc}}</div>
                                    <div class="uk-form-controls uk-margin-top">
                                      <input id="contactOrganisation" class="uk-input" type="text"
                                             formControlName="organisation"
                                             (input)="unsavedChangesPrompt()"
                                             [ngClass]="{'uk-form-danger': checkFormValidity('contact.organisation', this.editMode)}">
                                    </div>
                                    <i><small>Suggested length is 50 characters</small></i>
                                  </div>
                                </div>
                              </div>
                            </div>

                            <button class="uk-button uk-button-secondary" type="button" (click)="switchToTab('tab5')"><i class="fa fa-arrow-circle-left fa-lg"></i>&nbsp; Previous</button>

                          </li>
                        </ul>
&lt;!&ndash;                                                <pre>&ndash;&gt;
&lt;!&ndash;                                                  {{serviceForm.value | json}}&ndash;&gt;
&lt;!&ndash;                                                </pre>&ndash;&gt;
                      </div>
                      &lt;!&ndash;<button type="submit" class="btn btn-primary butn theme block full-width m-b">&ndash;&gt;
                      &lt;!&ndash;{{editMode ? "Update" : "Add"}}&ndash;&gt;
                      &lt;!&ndash;</button>&ndash;&gt;

                    </form>

                  </div>

                </div>
              </div>
              &lt;!&ndash; RIGHT HELP CONTENT &ndash;&gt;
              <app-aside-help-content #rightHelperContent [position]="'right'"
                                      [ngClass]="rightHelperContent.isPresent()?'tm-sidebar uk-width-1-4@m uk-first-column':'clear-style'">
              </app-aside-help-content>
            </div>
          </div>
          &lt;!&ndash; BOTTOM HELP CONTENT &ndash;&gt;
          <app-help-content #bottomHelperContent [position]="'bottom'"
                            [ngClass]="bottomHelperContent.isPresent()?'uk-margin-medium-top uk-margin-medium-bottom':'clear-style'">
          </app-help-content>
        </div>
      </div>
    </div>
  </div>
</div>-->


<div id="modal-preview" class="uk-flex-top uk-modal-container" uk-modal="bg-close: true; esc-close: true;">
  <div class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">

    <ng-container *ngIf="(providersPage?.results?.length > 0) && !disable">
      <app-preview-resource [resource]="serviceForm.value" [vocabularies]="vocabularies" [providers]="providersPage.results"></app-preview-resource>
    </ng-container>

  </div>
</div>

<div id="commentModal" uk-modal>
  <div *ngIf="!showLoader" class="uk-modal-dialog uk-modal-body uk-margin-auto-vertical">
    <h4>Add a comment <span style="color: grey">(optional)</span></h4>
    <p class="uk-margin">Before submitting your changes for "{{ serviceName }}", please provide us with the reason of your update and any comments you may have.</p>
    <form>
      <div class="uk-margin">
        <textarea class="uk-textarea" rows="5" placeholder="" [formControl]="commentControl"></textarea>
      </div>
    </form>
    <button class="uk-button uk-button-primary uk-modal-close uk-align-right" type="submit" (click)="onSubmit(this.serviceForm.value, false)">Submit</button>
    <!--    <button class="uk-button uk-button-default uk-modal-close" type="button">Cancel</button>-->
  </div>
</div>
