<div class="uk-section-default uk-section uk-section-small uk-padding-remove-bottom" style="min-height: 325px">
  <div class="uk-container uk-container-expand">
    <div class="uk-grid-margin uk-grid uk-grid-stack" uk-grid="">
      <div class="uk-width-1-1@m uk-first-column">

        <div class="services-provider-container">
          @if (trainingResource) {
            <div class="uk-flex">
              <!--            <div>-->
              <!--              <img src="{{ trainingResource.logo ? trainingResource.logo : '/assets/images/broken_image-black-48dp.svg' }}" style="max-width: 200px">-->
            <!--            </div>-->
            <div class="uk-margin-medium-left">
              <h3 class="uk-margin-remove">{{trainingResource.title}}</h3>
              <!--              <div><span class="status-label">Status: </span>{{ serviceBundle.status | titlecase}}</div>-->
              <!--              <div *ngIf="serviceHistory?.results[0]?.registeredBy && serviceHistory?.results[0]?.registeredAt">
              <span class="status-label">Registered by: </span>{{ serviceHistory.results[0].registeredBy }} on {{ serviceHistory.results[0].registeredAt | date}}
            </div>-->
          </div>
        </div>
      }
    </div>



    <div class="uk-container uk-margin-medium-top uk-margin-medium-bottom">
      <div class="uk-grid">



        <!-- MIDDLE -->
        <div class=" uk-width-expand@m">

          @if (errorMessage) {
            <div class="uk-alert uk-alert-danger uk-animation-slide-top">{{errorMessage}}</div>
          }
          <!--              <div *ngIf="loadingMessage" class="loading-big">-->
          <!--                <div class="loader-big" style="text-align: center; padding-top: 170px; color: rgb(47, 64, 80); font-weight: bold;">-->
          <!--                  {{ loadingMessage }}-->
        <!--                </div>-->
        <!--                <div class="transparentFilm"></div>-->
      <!--              </div>-->
      <!--              <div *ngIf="noAggregations">{{ noAggregations }}</div>-->
      @if (trainingResource && trainingResourceHistory?.results?.length>0) {
        <div>
          <div  class="uk-width-1-1@m uk-margin-medium-bottom">
            <div class="uk-card uk-card-default uk-margin-medium-bottom">
              <div class="uk-overflow-container">
                <table class="uk-table uk-table-divider uk-table-nowrap">
                  <thead>
                    <tr>
                      <th>Date</th>
                      <th>User</th>
                      <th >Action</th>
                      <th class="uk-text-center">Comment</th>
                      <th class="uk-text-center">Version changed</th>
                    </tr>
                  </thead>
                  <tbody>
                    @for (history of trainingResourceHistory.results; track history) {
                      <tr>
                        <td>@if (history.date) {
                          <span>{{ history.date | date : "MM-dd-yyyy" }}</span>
                        }</td>
                        <td class="">
                          @if (history.userFullName) {
                            <span>{{ history.userFullName }}</span>
                          }
                          @if (history.userFullName && history.userEmail) {
                            <span> - </span>
                          }
                          @if (history.userEmail) {
                            <span>{{ history.userEmail }}</span>
                          }
                          @if (history.userRole) {
                            <span> ({{ history.userRole }})</span>
                          }</td>
                          <td class="">@if (history.actionType) {
                            <span>{{ history.actionType }}</span>
                          }</td>
                          <td class="uk-text-center">@if (history.comment && history.comment!=='null') {
                            <span>{{ history.comment }}</span>
                          }</td>
                          <td class="uk-text-center">@if (history.actionType === 'updated version') {
                            <span
                            class="uk-badge">âœ“</span>
                          }
                        </td>
                      </tr>
                    }
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      }

      <button [routerLink]="['/dashboard/' + catalogueId + '/' + pidHandler.customEncodeURIComponent(trainingResource.resourceOrganisation) + '/training-resource-dashboard/' + pidHandler.customEncodeURIComponent(trainingResource.id) + '/history']"
        class="uk-button uk-button-action uk-display-block uk-margin-medium-top">
        <i class="fa fa-arrow-left" aria-hidden="true"></i> Back
      </button>

    </div>

  </div>
</div>

</div>
</div>
</div>
</div>
